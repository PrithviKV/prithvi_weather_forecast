<%= render "shared/flash" %>

<h1> Prithvi's Weather Forecast</h1>

<%= form_with(method: 'get', local: true) do %>
  <%= label :address, "Enter your address" %><br>
  <%= text_field_tag(:address, @address, size: 80) %><br>
  <%= submit_tag("Submit") %>
<% end %>

<% if @data %>
  <table>
    <tbody style = "border-color: black; border-width: 2px;">
      <tr>
        <td>Time ⌚️</td>
        <td>Temperature (F) 🌡️</td>
        <td>Wind (mph) 🍃</td>
        <td>Rain (%) ☔️</td>
      </tr>
      <% @data.each do |data| %>
      <tr>
          <td><%= data["name"] %></td>
          <td><%= data["temperature"] %></td>
          <td><%= data["windSpeed"] %></td>
          <td><%= data["probabilityOfPrecipitation"]["value"] %></td>
      </tr>
      <%end%>
    </tbody>
  </table>
<% end %>

<% if @weather_cache_exist %>
  <ul> *** This forecast was obtained from our cache ***
<% end %>

